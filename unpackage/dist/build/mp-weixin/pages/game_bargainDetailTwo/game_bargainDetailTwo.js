(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/game_bargainDetailTwo/game_bargainDetailTwo"],{"0da5":function(a,e,t){"use strict";(function(a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={data:function(){return{Router:this.$Router,showView:!1,is_show:!1,show_addok:!1,user_no:"",isShare:!1,mainData:{},num:"",logData:[]}},onLoad:function(e){var t=this;t.id=e.id,e.user_no?(t.user_no=e.user_no,t.user_no!=a.getStorageSync("user_info").user_no&&(t.isShare=!0)):t.user_no=a.getStorageSync("user_info").user_no,t.$Utils.loadAll(["getMainData"],t)},methods:{goBuy:function(e){var t=this,n={sku:[{id:t.mainData.id,sku:t.mainData}],type:t.mainData.type};a.setStorageSync("payPro",n),t.$Router.navigateTo({route:{path:"/pages/confirmOrder/confirmOrder?type="+e+"&order_id="+t.mainData.order[0].id+"&price="+t.mainData.order[0].price}})},onShareAppMessage:function(a){console.log(a);var e=this;return"button"===a.from?{title:"帮我砍一刀~~",imageUrl:e.mainData.mainImg[0].url,desc:"小蜂拼拼社区团购",path:"/pages/game_bargainDetailTwo/game_bargainDetailTwo?id="+e.mainData.id+"&user_no="+e.user_no,success:function(a){console.log("转发成功:"+JSON.stringify(a))},fail:function(a){console.log("转发失败:"+JSON.stringify(a))}}:{title:e.mainData.title,imageUrl:e.mainData.mainImg[0].url,desc:"小蜂拼拼社区团购",path:"/pages/game_bargainDetailTwo/game_bargainDetailTwo?id="+e.mainData.id,success:function(a){console.log("转发成功:"+JSON.stringify(a))},fail:function(a){console.log("转发失败:"+JSON.stringify(a))}}},goKanJia:function(){var a=this;a.is_show=!a.is_show},prev:function(){var a=this;a.$Router.switchTab({route:{path:"/pages/index/index"}})},kanjia:function(){var a=this,e=parseFloat(a.mainData.o_price),t=parseFloat(a.mainData.price),n=parseFloat(Math.random()*(e-t+1)+t,10)/2;a.num=parseFloat(n).toFixed(2),a.newPrice=(parseFloat(a.mainData.order[0].price)-parseFloat(n)).toFixed(2),parseInt(a.mainData.people)<=a.logData.length?a.$Utils.showToast("已达到限制人数","none"):(parseInt(a.mainData.people)-a.logData.length==1&&(a.num=(parseFloat(a.mainData.order[0].price)-parseFloat(e)).toFixed(2),a.newPrice=e),a.orderUpdate())},orderUpdate:function(){var e=this,t={};t.data={price:e.newPrice},t.searchItem={id:e.mainData.order[0].id,user_type:0},t.tokenFuncName="getProjectToken",console.log("postData",t),t.saveAfter=[{tableName:"Log",FuncName:"add",data:{type:5,relation_id:e.mainData.order[0].id,relation_table:"order",trade_info:"砍价记录",user_no:a.getStorageSync("user_info").user_no,thirdapp_id:2,price:e.num}}];var n=function(a){1e5==a.solely_code?(e.is_show=!0,e.getMainData()):e.$Utils.showToast(a.msg,"none")};e.$apis.orderUpdate(t,n)},getMainData:function(){var e=this,t={};t.searchItem={thirdapp_id:2,type:3,id:e.id},t.getAfter={order:{token:a.getStorageSync("user_token"),tableName:"Order",middleKey:"product_no",key:"product_no",searchItem:{status:1,type:3,user_no:e.user_no},condition:"="},log:{tableName:"Log",middleKey:["order",0,"id"],key:"relation_id",searchItem:{status:1,type:5,relation_table:"order"},condition:"="},logMe:{tableName:"Log",middleKey:["order",0,"id"],key:"relation_id",searchItem:{status:1,type:5,relation_table:"order",user_no:a.getStorageSync("user_info").user_no},condition:"="}};var n=function(a){if(a.info.data.length>0){e.mainData=a.info.data[0];var t=new RegExp("<img","gi");e.mainData.content=e.mainData.content.replace(t,'<img style="max-width: 100%;"')}else e.$Utils.showToast("没有更多了","none");e.getLogData(),console.log("self.mainData",e.mainData)};e.$apis.productGet(t,n)},getLogData:function(){var a=this,e={};e.searchItem={thirdapp_id:2,type:5,relation_id:a.mainData.order[0].id,user_type:0},e.tokenFuncName="getProjectToken",e.getAfter={user:{tableName:"User",middleKey:"user_no",key:"user_no",searchItem:{status:1},condition:"="}};var t=function(e){e.info.data.length>0&&a.logData.push.apply(a.logData,e.info.data),a.$Utils.finishFunc("getMainData")};a.$apis.logGet(e,t)}}};e.default=t}).call(this,t("543d")["default"])},"0e3c":function(a,e,t){"use strict";t.r(e);var n=t("5b00"),o=t("61aa");for(var i in o)"default"!==i&&function(a){t.d(e,a,function(){return o[a]})}(i);t("211d");var r=t("2877"),s=Object(r["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},"211d":function(a,e,t){"use strict";var n=t("382d"),o=t.n(n);o.a},"382d":function(a,e,t){},"5b00":function(a,e,t){"use strict";var n=function(){var a=this,e=a.$createElement;a._self._c},o=[];t.d(e,"a",function(){return n}),t.d(e,"b",function(){return o})},"61aa":function(a,e,t){"use strict";t.r(e);var n=t("0da5"),o=t.n(n);for(var i in n)"default"!==i&&function(a){t.d(e,a,function(){return n[a]})}(i);e["default"]=o.a},"746d":function(a,e,t){"use strict";(function(a){t("10a4"),t("921b");n(t("66fd"));var e=n(t("0e3c"));function n(a){return a&&a.__esModule?a:{default:a}}a(e.default)}).call(this,t("543d")["createPage"])}},[["746d","common/runtime","common/vendor"]]]);