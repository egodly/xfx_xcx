(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/myShopApply_pay/myShopApply_pay"],{"22f3":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){return t.Utils.stopMultiClick(t.submit)})},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})},"304d":function(t,e,a){"use strict";a.r(e);var n=a("22f3"),i=a("75ec");for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);a("91cd");var r=a("2877"),c=Object(r["a"])(i["default"],n["a"],n["b"],!1,null,null,null);e["default"]=c.exports},"51ff":function(t,e,a){},"75ec":function(t,e,a){"use strict";a.r(e);var n=a("f5df"),i=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);e["default"]=i.a},"91cd":function(t,e,a){"use strict";var n=a("51ff"),i=a.n(n);i.a},a6ad:function(t,e,a){"use strict";(function(t){a("10a4"),a("921b");n(a("66fd"));var e=n(a("304d"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("543d")["createPage"])},f5df:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{Router:this.$Router,mainData:[],curr:0,Utils:this.$Utils,choosePay:[{iconUrl:"../../static/images/pay-icon1.png",level:"V3",price:""},{iconUrl:"../../static/images/pay-icon2.png",level:"V4",price:""},{iconUrl:"../../static/images/pay-icon3.png",level:"V5",price:""},{iconUrl:"../../static/images/pay-icon4.png",level:"V6",price:""}],orderList:{}}},onLoad:function(){var t=this;t.$Utils.loadAll(["getMainData"],t)},methods:{submit:function(){var e=this;t.setStorageSync("canClick",!1),e.addOrder()},addOrder:function(){var e=this,a=e.$Utils.cloneForm(e.orderList);a.tokenFuncName="getProjectToken";var n=function(a){a&&1e5==a.solely_code?(e.orderId=a.info.id,e.pay()):(t.setStorageSync("canClick",!0),t.showToast({title:a.msg,duration:2e3}))};e.$apis.addOrder(a,n)},pay:function(e){var a=this,n={};n.wxPay={price:a.orderList.product[0].product.price},n.tokenFuncName="getProjectToken",n.searchItem={id:a.orderId},n.payAfter=[{tableName:"UserInfo",FuncName:"update",data:{check_status:1,level:a.orderList.product[0].product.level,vip_time:Date.parse(new Date)/1e3},searchItem:{user_no:t.getStorageSync("user_info").user_no}}];var i=function(e){if(1e5==e.solely_code)if(t.setStorageSync("canClick",!0),e.info){var n=function(e){console.log("payData",e),1==e?(t.showToast({title:"支付成功",duration:1e3,success:function(){}}),setTimeout(function(){a.$Router.switchTab({route:{path:"/pages/index/index"}})},1e3)):(t.setStorageSync("canClick",!0),t.showToast({title:"支付失败",duration:2e3}))};a.$Utils.realPay(e.info,n)}else t.showToast({title:"支付成功",duration:1e3,success:function(){}}),setTimeout(function(){a.$Router.redirectTo({route:{path:"/pages/myOderList/myOderList"}})},1e3);else t.setStorageSync("canClick",!0),t.showToast({title:e.msg,duration:2e3})};a.$apis.pay(n,i)},choose:function(t){var e=this;e.curr!=t&&(e.curr=t,e.orderList={product:[{id:e.mainData[t].id,count:1,product:e.mainData[t]}],type:e.mainData[t].type})},getMainData:function(){var t=this,e={searchItem:{thirdapp_id:2,type:5},order:{level:"asc"}},a=function(e){if(e.info.data.length>0){t.mainData.push.apply(t.mainData,e.info.data);for(var a=0;a<t.mainData.length;a++)for(var n=0;n<t.choosePay.length;n++)t.mainData[a].title==t.choosePay[n].level&&(t.choosePay[n].price=t.mainData[a].price,t.choosePay[n].id=t.mainData[a].id);t.orderList={product:[{id:t.mainData[0].id,count:1,product:t.mainData[0]}],type:t.mainData[0].type}}else t.$Utils.showToast("没有更多了","none");console.log("self.mainData",t.mainData),t.$Utils.finishFunc("getMainData")};t.$apis.productGet(e,a)}}};e.default=a}).call(this,a("543d")["default"])}},[["a6ad","common/runtime","common/vendor"]]]);