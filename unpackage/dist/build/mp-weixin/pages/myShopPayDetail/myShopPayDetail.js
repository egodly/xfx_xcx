(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/myShopPayDetail/myShopPayDetail"],{"0d5c":function(t,o,e){"use strict";var a=function(){var t=this,o=t.$createElement;t._self._c},n=[];e.d(o,"a",function(){return a}),e.d(o,"b",function(){return n})},2492:function(t,o,e){"use strict";(function(t){e("10a4"),e("921b");a(e("66fd"));var o=a(e("c544"));function a(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,e("543d")["createPage"])},"456d":function(t,o,e){"use strict";e.r(o);var a=e("ab15"),n=e.n(a);for(var i in a)"default"!==i&&function(t){e.d(o,t,function(){return a[t]})}(i);o["default"]=n.a},5068:function(t,o,e){"use strict";var a=e("870a"),n=e.n(a);n.a},"870a":function(t,o,e){},ab15:function(t,o,e){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e={data:function(){return{Router:this.$Router,showView:!1,is_show:!1,show_addok:!1,is_show1:!1,mainData:{},chooseSku:{},noSelectSku:!0,count:1,price:"",groupPrice:"",hasAdd:!1,isVip:!1}},onLoad:function(t){var o=this;o.id=t.id,t.user_no&&(o.user_no=t.user_no,o.isVip=!0),t.leader_no&&(o.leader_no=t.leader_no),o.$Utils.loadAll(["getMainData","getUserInfoData"],o)},methods:{getUserInfoData:function(){var o=this;console.log("852369");var e={tokenFuncName:"getProjectToken"};e.searchItem={user_no:t.getStorageSync("user_info").user_no};var a=function(t){1e5==t.solely_code&&t.info.data[0]?o.userInfoData=t.info.data[0]:o.$Utils.showToast(t.msg,"none"),o.$Utils.finishFunc("getUserInfoData")};o.$apis.userInfoGet(e,a)},addToShop:function(){var o=this;if(o.hasAdd)o.$Utils.showToast("商品已在店铺","none");else if(o.userInfoData.level>=3&&2==o.userInfoData.check_status){var e={};e.data={thirdapp_id:2,type:6,relation_table:"product",relation_id:o.id,user_no:t.getStorageSync("user_info").user_no},e.tokenFuncName="getProjectToken";var a=function(t){1e5==t.solely_code?o.show_addok=!0:o.$Utils.showToast(t.msg,"none")};o.$apis.logAdd(e,a)}else o.$Utils.showToast("您暂未拥有店铺","none")},counter:function(t){var o=this;"+"==t?o.count++:"-"==t&&o.count>1&&o.count--,o.countTotalPrice()},countTotalPrice:function(){var t=this;t.price=t.chooseSku.price*t.count,t.groupPrice=t.chooseSku.group_price*t.count},goBuy:function(o){var e=this;if("{}"!=JSON.stringify(e.chooseSku)){var a={sku:[{id:e.chooseSku.id,count:e.count,sku:e.chooseSku}],type:e.mainData.type};t.setStorageSync("payPro",a),e.leader_no?e.$Router.navigateTo({route:{path:"/pages/confirmOrder/confirmOrder?type="+o+"leader_no="+e.leader_no}}):e.$Router.navigateTo({route:{path:"/pages/confirmOrder/confirmOrder?type="+o}})}else e.$Utils.showToast("商品错误","none",1e3)},seltSpecs:function(t){var o=this;o.mainData.sku[t].id!=o.chooseSku.id&&(o.chooseSku=o.mainData.sku[t],o.count=1,o.countTotalPrice())},goPinDan:function(){var t=this;t.is_show=!t.is_show},showSel:function(){var t=this;t.is_show1=!t.is_show1},showAddok:function(){var t=this;t.show_addok=!t.show_addok},prev:function(){var t=this;t.$Router.switchTab({route:{path:"/pages/index/index"}})},onShareAppMessage:function(t){console.log(t);var o=this;return"button"===t.from?{title:o.mainData.title,imageUrl:o.mainData.mainImg[0].url,desc:"小蜂拼拼社区团购",path:"/pages/goodsJoinDetail/goodsJoinDetail?id="+o.mainData.id+"&leader_no="+o.user_no,success:function(t){console.log("转发成功:"+JSON.stringify(t))},fail:function(t){console.log("转发失败:"+JSON.stringify(t))}}:{title:o.mainData.title,imageUrl:o.mainData.mainImg[0].url,desc:"小蜂拼拼社区团购213",path:"/pages/goodsJoinDetail/goodsJoinDetail?id="+o.mainData.id,success:function(t){console.log("转发成功:"+JSON.stringify(t))},fail:function(t){console.log("转发失败:"+JSON.stringify(t))}}},getMainData:function(){var o=this,e={};e.searchItem={thirdapp_id:2,type:1,id:o.id},e.getAfter={sku:{tableName:"Sku",middleKey:"product_no",key:"product_no",searchItem:{status:1},condition:"="},order:{token:t.getStorageSync("user_token"),tableName:"Order",middleKey:"product_no",key:"product_no",searchItem:{status:1,order_step:4,pay_status:1},condition:"="},log:{tableName:"Log",middleKey:"id",key:"relation_id",searchItem:{status:1,type:6},condition:"="}};var a=function(e){if(e.info.data.length>0){o.mainData=e.info.data[0],o.mainData.sku[0]?(o.chooseSku=o.mainData.sku[0],o.countTotalPrice()):(o.$Utils.showToast("商品信息错误","none"),setTimeout(function(){t.navigateBack({delta:1})},1500)),o.mainData.log.length>0&&(o.hasAdd=!0);var a=new RegExp("<img","gi");o.mainData.content=o.mainData.content.replace(a,'<img style="max-width: 100%;"')}else o.$Utils.showToast("没有更多了","none");console.log("self.mainData",o.mainData),o.$Utils.finishFunc("getMainData")};o.$apis.productGet(e,a)}}};o.default=e}).call(this,e("543d")["default"])},c544:function(t,o,e){"use strict";e.r(o);var a=e("0d5c"),n=e("456d");for(var i in n)"default"!==i&&function(t){e.d(o,t,function(){return n[t]})}(i);e("5068");var s=e("2877"),r=Object(s["a"])(n["default"],a["a"],a["b"],!1,null,null,null);o["default"]=r.exports}},[["2492","common/runtime","common/vendor"]]]);